<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>
<body>
  <script>
    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch#description
    // ((Promise) => {
    //   const originalThen = Promise.prototype.then;
    //   const originalCatch = Promise.prototype.catch;

    //   Promise.prototype.then = function (...args) {
    //     console.log("Called .then on %o with arguments: %o", this, args);
    //     return originalThen.apply(this, args);
    //   };
    //   Promise.prototype.catch = function (...args) {
    //     console.error("Called .catch on %o with arguments: %o", this, args);
    //     return originalCatch.apply(this, args);
    //   };
    // })(Promise);

    // 第一题
    // Promise.resolve().then(() => {
    //   console.log(1)
    // }).catch(() => {
    //   console.log(2)
    // }).then(() => {
    //   console.log(3)
    // }) // fulfilled

    /*
      打印结果：
      1
      3
    */

    // const p1 = Promise.resolve().then(() => {
    //   console.log(1)
    //   return 'from first then'
    // })
    // const p2 = p1.catch(() => {
    //   console.log(2)
    //   return 'from catch'
    // })
    // p2.then((res) => {
    //   console.log(3, res)
    // })

    // 第二题
    // Promise.resolve().then(() => {
    //   console.log(1)
    //   throw new Error('error1')
    // }).catch(() => {
    //   console.log(2)
    // }).then(() => {
    //   console.log(3)
    // }) // fulfilled

    /*
      打印结果：
      1
      2
      3
    */

    // 第三题
    const p = Promise.resolve().then(() => {
      console.log(1)
      throw new Error('error1') // rejected
    }).catch(() => {
      console.log(2) // fulfilled
      return 'first catch'
    }).catch(() => { // 注意这里是 catch
      console.log(3)
    }) // fulfilled

    /*
      打印结果：
      1
      2
    */

    // resolve（fulfilled） 触发 then 回调
    // reject（rejected） 触发 catch 回调
  </script>
</body>
</html>